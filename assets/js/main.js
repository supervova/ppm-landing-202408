(()=>{var l=null,b=(e,t)=>{window.matchMedia("(max-width: 767px)").matches&&new IntersectionObserver(([i])=>e.classList.toggle("is-pinned",i.intersectionRatio<1),{threshold:[1],root:document.querySelector(t),rootMargin:"0px 50px"}).observe(e)},q=e=>{let t=document.getElementById("modal-external"),r=t.querySelector(".modal__content"),i=e.currentTarget.getAttribute("href");e.preventDefault(),fetch(i).then(s=>s.text()).then(s=>{let m=new DOMParser().parseFromString(s,"text/html").querySelector(".content").innerHTML;r.insertAdjacentHTML("beforeend",m)}),t.addEventListener("close",()=>{r.innerHTML=""})},f=e=>{l=null,setTimeout(()=>{e.close()},400)},H=e=>{setTimeout(()=>{l=e},400),e.showModal();let t=e.querySelector("header");t&&b(t,".modal[open]")},M=e=>{let t=e.currentTarget,r=t.hasAttribute("href"),i=t.getAttribute("data-target"),s=document.getElementById(i);e.preventDefault(),s.open?f(s):H(s),r&&q(e)},T=()=>{document.addEventListener("click",e=>{if(l===null)return;l.firstElementChild.contains(e.target)||f(l)}),document.querySelectorAll('[data-role="close-modal"]').forEach(e=>{e.addEventListener("click",t=>{let r=t.currentTarget.closest(".modal");f(r)})}),document.querySelectorAll("[data-target]").forEach(e=>{e.addEventListener("click",t=>{M(t)})})},E=T;document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".cefr"),t=document.querySelector("main.main"),r=document.querySelector(".is-playphrase-way .section__image img"),i=document.querySelector(".header .btn"),s=document.querySelector(".progress"),g=document.querySelector(".main"),p=document.getElementById("form-search"),m=document.getElementById("form-search-input"),v=document.querySelectorAll("[data-animation]"),x=.8;function u(){let o=window.scrollY,n=t.offsetHeight,c=window.innerHeight,d=e.offsetHeight;if(n>c&&d>c){let a=d-n,h=o/(n-c)*a;e.style.transform=`translateY(-${h}px)`}if(window.matchMedia("(min-width: 768px)").matches){let a=o*-.32;r.style.transform=`translateY(${a}px)`}}function w(){let o=window.scrollY,n=window.innerHeight,{scrollHeight:c}=document.documentElement,d=1-o/(c-n);i.style.opacity=d;let a=g.offsetHeight-106*n/100-150,y=Math.min(o/((c-n)*x),1),h=50+a*y;s.style.height=`${h}px`}p.addEventListener("submit",o=>{o.preventDefault();let n=m.value,c=`https://www.playphrase.me/#/search?q=${encodeURIComponent(n)}`;window.location.href=c});let S={threshold:[0,.5,1]},L=new IntersectionObserver(o=>{o.forEach(n=>{n.intersectionRatio>.5?n.target.classList.add("is-animated"):n.intersectionRatio===0&&n.target.classList.remove("is-animated")})},S);v.forEach(o=>L.observe(o)),window.addEventListener("scroll",()=>{u(),w()}),window.addEventListener("resize",()=>{u()}),u(),w(),E()});})();
