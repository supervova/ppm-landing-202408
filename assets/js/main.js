(()=>{var a=null,L=(t,e)=>{window.matchMedia("(max-width: 767px)").matches&&new IntersectionObserver(([i])=>t.classList.toggle("is-pinned",i.intersectionRatio<1),{threshold:[1],root:document.querySelector(e),rootMargin:"0px 50px"}).observe(t)},H=t=>{let e=document.getElementById("modal-external"),n=e.querySelector(".modal__content"),i=t.currentTarget.getAttribute("href");t.preventDefault(),fetch(i).then(s=>s.text()).then(s=>{let m=new DOMParser().parseFromString(s,"text/html").querySelector(".content").innerHTML;n.insertAdjacentHTML("beforeend",m)}),e.addEventListener("close",()=>{n.innerHTML=""})},f=t=>{a=null,setTimeout(()=>{t.close()},400)},T=t=>{setTimeout(()=>{a=t},400),t.showModal();let e=t.querySelector("header");if(e&&L(e,".modal[open]"),t.id==="modal-outro"){let n=t.querySelector("#tip-03");n&&setTimeout(()=>{n.scrollIntoView({behavior:"smooth",block:"start"})},800)}},I=t=>{let e=t.currentTarget,n=e.hasAttribute("href"),i=e.getAttribute("data-target"),s=document.getElementById(i);t.preventDefault(),s.open?f(s):T(s),n&&H(t)},D=()=>{document.addEventListener("click",t=>{if(a===null)return;a.firstElementChild.contains(t.target)||f(a)}),document.querySelectorAll('[data-role="close-modal"]').forEach(t=>{t.addEventListener("click",e=>{let n=e.currentTarget.closest(".modal");f(n)})}),document.querySelectorAll("[data-target]").forEach(t=>{t.addEventListener("click",e=>{I(e)})})},E=D;document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector(".cefr"),e=document.querySelector("main.main"),n=document.querySelector(".is-intro .section__image img"),i=document.querySelector(".is-playphrase-way .section__image img"),s=document.querySelector(".header .btn"),g=document.querySelector(".progress"),p=document.querySelector(".main"),m=document.getElementById("form-search"),v=document.getElementById("form-search-input"),S=document.querySelectorAll("[data-animation]"),x=.8;function u(){let r=window.scrollY,o=e.offsetHeight,c=window.innerHeight,l=t.offsetHeight;if(o>c&&l>c){let h=l-o,M=r/(o-c)*h;t.style.transform=`translateY(-${M}px)`}let d=r*-.32;window.matchMedia("(min-width: 768px)").matches&&(i.style.transform=`translateY(${d}px)`),window.matchMedia("(min-width: 1024px)").matches&&(n.style.transform=`translateY(${d}px)`)}function w(){let r=window.scrollY,o=window.innerHeight,{scrollHeight:c}=document.documentElement,l=1-r/(c-o);s.style.opacity=l;let d=p.offsetHeight-106*o/100-150,h=Math.min(r/((c-o)*x),1),y=50+d*h;g.style.height=`${y}px`}m.addEventListener("submit",r=>{r.preventDefault();let o=v.value,c=`https://www.playphrase.me/#/search?q=${encodeURIComponent(o)}`;window.location.href=c});let b={threshold:[0,.5,1]},q=new IntersectionObserver(r=>{r.forEach(o=>{o.intersectionRatio>.5?o.target.classList.add("is-animated"):o.intersectionRatio===0&&o.target.classList.remove("is-animated")})},b);S.forEach(r=>q.observe(r)),window.addEventListener("scroll",()=>{u(),w()}),window.addEventListener("resize",()=>{n.style.transform="translateY(0)",u()}),u(),w(),E()});})();
